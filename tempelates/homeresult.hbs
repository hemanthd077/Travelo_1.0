<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Result</title>
    <link rel="icon" href="/images/logowhite.svg">
    <link rel="stylesheet" href="/homeresult.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Open+Sans:wght@300;400;500;600;700;800&family=Philosopher&display=swap" rel="stylesheet">
    
</head>
<body>
    <div id="main">
        <div id="homenavbar">
                <img id="appicon" src="/images/homelogo.png" alt="logo">
                <form action="/home" class="bookingdiv-1">
                    <button id="bookingbutton" href="/home" ><i class="fa-solid fa-house"></i> Home</button>
                </form>

                <form action="/booking"  class="bookingdiv">
                    <button id="bookingbutton" href="/booking"><i class="fa-solid fa-bus-simple"></i> Booking</button>
                </form>

                <form action="/likes-bus" class="bookingdiv">
                    <button id="bookingbutton" href="/likes-bus"><i class="fa-solid fa-heart"></i> Wishlist</button>
                </form>

                <form action="/profile"  class="profilediv">
                    <button id="profilebutton" href="/profile"><i class="fa-solid fa-user"></i> Profile</button>
                </form>

                <form action="/exit" class="exitdiv">
                    <button id="exitbutton"><i class="fas fa-sign-out-alt fa-lg"></i> Sign Out</button>
                </form>                                                                                                 
        </div>
        <div class="mainblock">
            {{#if searchresult}}
                <nav id="nav{{#if busContent}}content{{/if}}">
                    {{#if busContent}}
                        <div style="display: flex;flex-direction:column;margin-left:35px">
                            <p style="font-weight: 500; font-size:35px;">{{busdata.[1]}}</p>
                            <div class="div-control">
                                <img style="width: 20px; height:20px;border-radius:50px" src="data:{{busdata.[0]}}" alt="dealerpic">
                                <p id="dealercompanyname-1">{{busdata.[2]}}</p>
                            </div>
                        </div>
                        <div id="source-place">
                            <p id="pickup-txt"><i class="fa-solid fa-person-walking-luggage fa-flip-horizontal"></i> Pick up</p>
                            <p id="source-place-1">{{headerdata.[2]}}<input type="hidden" id="from" placeholder="From" name="source" value="{{source_destination.[1]}}"  required></p>
                        </div>
                        <div id="source-place-2">
                            <p id="pickup-txt"><i class="fa-solid fa-person-walking-luggage"></i> Target Location</p>
                            <p id="source-place-1">{{headerdata.[4]}}<input type="hidden" id="from" placeholder="From" name="source" value="{{source_destination.[1]}}"  required></p>
                        </div>
                    {{/if}}
                    {{#if source_destination}}
                        <p id="plan-count">{{length}} Plans in {{source_destination.[4]}}</p>
                        <div id="source-place">
                            <p id="pickup-txt"><i class="fa-solid fa-person-walking-luggage fa-flip-horizontal"></i> Pick up</p>
                            <p id="source-place-1">{{source_destination.[2]}}<input type="hidden" id="from" placeholder="From" name="source" value="{{source_destination.[1]}}"  required></p>
                        </div>
                        <div id="source-place-2">
                            <p id="pickup-txt"><i class="fa-solid fa-person-walking-luggage"></i> Target Location</p>
                            <p id="source-place-1">{{source_destination.[4]}}<input type="hidden" id="from" placeholder="From" name="source" value="{{source_destination.[1]}}"  required></p>
                        </div>
                    {{/if}}
                </nav>
            {{/if}}

            {{#if result}}
                <div class="content-container activeanimation">
                    <div class="card">
                        <div class="header">
                                <div class="logo-container"></div>
                                <div class="text-line" style="width: 80%;"></div>
                        </div>
                        <div class="text-line" style="width: 50%;"></div>
                    </div>
                    <div class="card">
                        <div class="header">
                                <div class="logo-container"></div>
                                <div class="text-line" style="width: 80%;"></div>
                        </div>
                        <div class="text-line" style="width: 30%;"></div>
                        <div class="text-line" style="width: 50%;"></div>
                    </div>
                    <div class="card">
                        <div class="header">
                                <div class="logo-container"></div>
                                <div class="text-line" style="width: 80%;"></div>

                        </div>
                        <div class="text-line" style="width: 50%;"></div>
                    </div>
                </div>
                <div id="fetch-content-maindiv">
                    {{#each buscontent}}
                            <div id="search-div">
                                <div id="buttons">
                                    <form action="/busimg" method="post">
                                        <input type="hidden" name="source" value={{this.[2]}}>
                                        <input type="hidden" name="destination" value={{this.[3]}}>
                                        <input type="hidden" name="busid" value={{@index}}>
                                        <button type="submit" id="buspic-buttons" href="/busimg"></button>
                                    </form>
                                </div>
                                <img id="busimg" src="data:{{this.[12]}}" alt="buspic">
                                <div id="searchresultdiv">
                                    <div class="div-control">
                                        <img style="width: 30px; height:30px;border-radius:50px" src="data:{{this.[0]}}" alt="dealerpic">
                                        <p style="font-weight: 500; font-size:20px;">{{this.[1]}}</p>
                                    </div>
                                    <p id="dealercompanyname">{{this.[2]}}</p>
                                    <p style="margin-top: 10px;margin-left:40px">Package Highlights</p>
                                    <div id="div-size-control">
                                        {{#each this.[3]}}
                                            <p><i  class="fa-solid fa-location-dot"></i> {{this}}</p>
                                        {{/each}}
                                    </div>
                                    <div class="div-control-1">
                                        <i data-star="{{this.[13]}}"></i>
                                        <p>{{this.[13]}}</p>
                                    </div>
                                    <div id="bus-feature-div">
                                        {{#if this.[5]}}
                                            <p><i class="fa-solid fa-radio"></i> Audio System</p>
                                        {{/if}}
                                        {{#if this.[7]}}
                                            <p><i class="fa-solid fa-couch"></i> Seater</p>
                                        {{else}}
                                            <p><i class="fa-solid fa-couch"></i> Semi Sleeper</p>
                                        {{/if}}
                                        {{#if this.[8]}}
                                            <p><i class="fa-solid fa-lightbulb"></i> DJ Lighting</p>
                                        {{/if}}
                                        {{#if this.[9]}}
                                            <p><i class="fa-solid fa-glass-water-droplet"></i> Purifier</p>
                                        {{/if}}
                                    </div>
                                </div>
                                <div id="seat-count">
                                    <p>{{this.[4]}} Seat</p>
                                </div>
                                <div id="ac-p">
                                    {{#if this.[6]}}
                                        <p id="ac-p-inner"><svg width="20" height="20" stroke-width="1.5"  viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="IconChangeColor"> <path d="M22 3.6V11H2V3.6C2 3.26863 2.26863 3 2.6 3H21.4C21.7314 3 22 3.26863 22 3.6Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M18 7H19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M2 11L2.78969 13.5844C3.04668 14.4255 3.82294 15 4.70239 15H6" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M22 11L21.2103 13.5844C20.9533 14.4255 20.1771 15 19.2976 15H18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M9.5 14.5C9.5 14.5 9.5 21.5 6 21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M14.5 14.5C14.5 14.5 14.5 21.5 18 21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M12 14.5V21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> </svg> AC</p>
                                    {{else}}
                                        <p id="ac-p-inner"><i class="fa-solid fa-fan"></i> Non AC</p>
                                    {{/if}}
                                </div>
                                <div id="busamount-div">
                                    <button id="totalamount-button"><p>Total Amount<br><i class="fa-solid fa-indian-rupee-sign"></i> {{this.[10]}}</p></button>
                                    <button id="bookamount-button-1"><p>Pre Book at<br><i class="fa-solid fa-indian-rupee-sign"></i> {{this.[11]}}</p></button>
                                </div>
                                <div id="busamount-div-heart">
                                    {{#if this.[19]}}
                                    <button id="heart-button" onclick="likebutton('{{this.[18]}}',{{@index}})"><i id="toggleheart_{{@index}}"  class="fa-solid fa-heart fa-lg"></i></button>
                                    {{else}}
                                    <button id="heart-button" onclick="likebutton('{{this.[18]}}',{{@index}})"><i id="toggleheart_{{@index}}"  class="fa-regular fa-heart fa-lg"></i></button>
                                    {{/if}}
                                </div>
                                
                            </div>
                    {{/each}}
                </div>
            {{/if}}

            {{#if error}}
                <div id="searchresultdiv1">
                    <i id="sademoji" class="fa fa-frown fa-3x" aria-hidden="true" ></i>
                    <h1 id="error">{{res}}</h1>
                    <a href="/home" id="error1">Do check Other Routes <i class="fa-solid fa-angle-right"></i></a>
                </div><br>
            {{/if}}

            {{#if busContent}}
                <div class="content-container activeanimation">
                    <div class="card">
                        <div class="header">
                                <div class="logo-container"></div>
                                <div class="text-line" style="width: 80%;"></div>
                        </div>
                        <div class="text-line" style="width: 50%;"></div>
                    </div>
                    <div class="card">
                        <div class="header">
                                <div class="logo-container"></div>
                                <div class="text-line" style="width: 80%;"></div>
                        </div>
                        <div class="text-line" style="width: 30%;"></div>
                        <div class="text-line" style="width: 50%;"></div>
                    </div>
                    <div class="card">
                        <div class="header">
                                <div class="logo-container"></div>
                                <div class="text-line" style="width: 80%;"></div>

                        </div>
                        <div class="text-line" style="width: 50%;"></div>
                    </div>
                </div>
                <div id="outer-bus-data">
                    <div id="bus-img">
                        <div id="outer-photo-block">
                            {{#each imagecontent}}
                                <div class="mySlides fade" id="bus-img-detail">
                                    <img id="bus-image" src="data:{{this}}"  alt="Bus Image" />
                                </div>
                            {{/each}}

                            <br><div id="dot">
                                {{#each imagecontent}}
                                    <div style="text-align:center">
                                        <span class="dot"></span> 
                                    </div>
                                {{/each}}
                            </div>
                        </div>
                        <div id="bus-feature-data">
                            <div class="div-control-rating">
                                <p class="rating-num">{{busdata.[13]}}/5</p>
                                <div class="rowFlex">
                                    <p style="margin-top: 5px;">Rating : </p>
                                    <i data-star="{{busdata.[13]}}"></i><br>
                                </div>
                            </div>
                            <div class="div-control-features">
                                <strong id="feature-header">Bus Features</strong>
                                {{#if busdata.[14]}}
                                    <p><i class="fa-solid fa-wifi"> </i> <strong>Network:</strong> Free Wi-Fi connectivity for passengers</p>
                                {{/if}}
                                {{#if busdata.[5]}}
                                    <p><i class="fa-solid fa-radio fa-lg"></i> <strong>Sound System:</strong> Premium audio system with surround sound.</p>
                                {{/if}}
                                {{#if busdata.[6]}}
                                    <p id="ac-p-inner-1"><svg width="20" height="25" stroke-width="1.5"  viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="IconChangeColor"> <path d="M22 3.6V11H2V3.6C2 3.26863 2.26863 3 2.6 3H21.4C21.7314 3 22 3.26863 22 3.6Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M18 7H19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M2 11L2.78969 13.5844C3.04668 14.4255 3.82294 15 4.70239 15H6" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M22 11L21.2103 13.5844C20.9533 14.4255 20.1771 15 19.2976 15H18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M9.5 14.5C9.5 14.5 9.5 21.5 6 21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M14.5 14.5C14.5 14.5 14.5 21.5 18 21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M12 14.5V21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> </svg> <strong>Air Conditioning:</strong> Yes</p>
                                {{else}}
                                    <p id="ac-p-inner"><svg width="20" height="25" stroke-width="1.5"  viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="IconChangeColor"> <path d="M22 3.6V11H2V3.6C2 3.26863 2.26863 3 2.6 3H21.4C21.7314 3 22 3.26863 22 3.6Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M18 7H19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M2 11L2.78969 13.5844C3.04668 14.4255 3.82294 15 4.70239 15H6" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M22 11L21.2103 13.5844C20.9533 14.4255 20.1771 15 19.2976 15H18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M9.5 14.5C9.5 14.5 9.5 21.5 6 21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M14.5 14.5C14.5 14.5 14.5 21.5 18 21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M12 14.5V21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> </svg> <strong>Air Conditioning:</strong> No</p>
                                {{/if}}
                                {{#if busdata.[7]}}
                                    <p><i class="fa-solid fa-couch"></i> <strong>Seat Type:</strong> {{busdata.[4]}} Comfortable seats for a relaxing trip.</p>
                                {{else}}
                                    <p><i class="fa-solid fa-couch"></i> <strong>Seat Type:</strong> {{busdata.[4]}} Reclining seats with ample legroom</p>
                                {{/if}}
                                {{#if busdata.[8]}}
                                    <p><i class="fa-solid fa-lightbulb" ></i> <strong>Lighting:</strong> LED lighting for a comfortable ambiance.</p>
                                {{/if}}
                                {{#if busdata.[9]}}
                                    <p><i class="fa-solid fa-glass-water-droplet fa-lg"></i><strong> Water Purifier:</strong> Provision for clean drinking water</p>
                                {{/if}}
                                {{#if busdata.[15]}}
                                    <p><i class="fa-solid fa-suitcase-rolling fa-lg"></i> <strong>Luggage Storage:</strong> Secure storage for passenger's luggage</p>
                                {{else}}
                                    <p><i class="fa-solid fa-suitcase-rolling fa-lg"></i> <strong>Luggage Storage:</strong> No Luggage storage</p>
                                {{/if}}
                                {{#if busdata.[16]}}
                                    <p><i class="fa-solid fa-tv"></i> <strong>Entertainment System:</strong> TV screens for in-bus entertainment</p>
                                {{/if}}
                                <input id="dayCountid" type="hidden" value="{{busdata.[17]}}">
                            </div>
                        </div>

                        <br><br><br>
                        <div class="div-control-features termsandcondition">
                            <h3 style="color: #ae006b;">Term's & Conditions</h3>
                            <div>
                                <h4 class="tc-subheader">ROLE OF TRAVELO</h4>
                                <ul class="ul-block">
                                    <li><span>Travelo only provides a technology platform that connects intending travelers with bus operators. It doesn't operate any bus or offer the service of transportation to the User. travelo also doesn't act as an agent of any bus operator in the process of providing the above-mentioned technology platform services.</span></li>
                                    <li><span>The bus booking voucher which travelo issues to a User is solely based on the information provided or updated by the bus operator regarding the seat availability.</span></li>
                                    <li><span>The amenities, services, routes, fares, schedule, bus type, seat availability and any other details pertaining to the bus service are provided by the respective bus operator and travelo has no control over such information provided by the bus operator.</span></li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="tc-subheader">LIMITATION OF LIABILITY OF TRAVELO</h4>
                                <ul class="ul-block">
                                    <span>As a technology platform to enable transactions between the bus operators and the Users, travelo shall not be responsible for the operations of the bus operator including, but not limited to the following:</span>
                                    <li><span>Timely departure or arrival of the bus,The conduct of bus operator's employees, representatives or agents</span></li>
                                    <li><span>The condition of the bus, seats etc. not being up to the customer's expectation or as per the description provided by the bus operato</span></li>
                                    <li><span>Cancellation of the trip due to any reasons</span></li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="tc-subheader">CANCELLATION OF TICKET</h4>
                                <ul class="ul-block">
                                    <li><span>Cancellation of bus can be done either through the User's login in the travelo's website or by calling on the customer care number</span></li>
                                    <li><span>Any cancellation is subject to such cancellation charges as mentioned.</span></li>
                                    <li><span>Bookings can only be cancelled through the app or the website,offline cancellations are not permitted.</span></li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="tc-subheader">MISCELLANEOUS</h4>
                                <ul class="ul-block">
                                    <li><span>The bus operator shall solely be liable for compliance of all laws including but not limited to the Motor Vehicle Act its Rules, applicable regulations, guidelines or directions enacted or issued by the Central Government or relevant State Governments.</span></li>
                                    <li><span>Any prosecution arising out of the contravention of such laws, rules, regulations, guidelines including directives on fare control from respective RTO's or directions including but not limited to fines or penalties shall be borne by the bus operator.</span></li>
                                    <li><span>The User agrees to take up any grievance resulting from cancellation or any deficiency in services due to any action of the enforcement agencies arising with the bus operator.</span></li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="tc-subheader">TERMINATION </h4>
                                <ul class="ul-block">
                                    <li><span>We reserve the right to terminate or suspend user accounts or access to the app at our discretion, without prior notice.</span></li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="tc-subheader">AMENDMENTS TO TERMS</h4>
                                <ul class="ul-block">
                                    <li><span>We may update these Terms and Conditions from time to time.</span></li>
                                    <li><span>Users are responsible for reviewing these terms periodically to stay informed of any changes.</span></li>
                                </ul>
                            </div>
                            <div>
                                <h4 class="tc-subheader">INTELLECTUAL PROPERTY</h4>
                                <ul class="ul-block">
                                    <li><span>The app and its content, including logos, trademarks, and text, are protected by copyright and other intellectual property laws.</span></li>
                                    <li><span>Users must not use or reproduce these materials without permission.</span></li>
                                </ul>
                            </div>
                        </div><br><br>
                    </div>
                    <div id="bus-plan-data">
                        {{#each planDataArray as |outerItem outerIndex|}}
                            <div class="div-control-plan">
                                <div class="day-header">
                                    <p>{{this.[0]}} - {{this.[3]}}</p>
                                </div>
                                <div>
                                    {{#each this.[2]}}
                                        <div class="mySlidesspot{{outerIndex}} fadespot mySlidesspot" id="bus-img-detail">
                                            <img id="spot-image" src="data:{{this}}"  alt="spot Image" />
                                        </div>
                                    {{/each}}
                                    <div id="prevNextButton">
                                        <button class="prev-button" onclick="prevSlide({{@index}})"><i class="fa-solid fa-angle-left fa-2x"></i></button>
                                        <button class="next-button" onclick="nextSlide({{@index}})"><i class="fa-solid fa-angle-right fa-2x"></i></button>
                                    </div>
                                </div>
                                <div>
                                    <p>{{this.[1]}}</p>
                                </div>
                            </div>
                        {{/each}}
                        <div id="pay-footer">
                            <input type="hidden" id="planid-payment" value="{{busdata.[20]}}">
                            <input type="hidden" id="plan-amount-payment" value="{{busdata.[11]}}">
                            <p class="pay-footer-txt">Total Amount to Pay : <i class="fa-solid fa-indian-rupee-sign"></i> {{busdata.[10]}}</p>
                            <div style="display: flex;flex-direction:column;gap:10px;align-items:center">
                                <button id="popupButton" class="paybutton"><p>Pre Book Now at<br><i class="fa-solid fa-indian-rupee-sign"></i> {{busdata.[11]}}</p></button>
                                <p style="font-size: 13px;">Balance Pay On pickup</p>
                            </div>
                        </div>
                        <br>
                        <div class="div-control-plan">
                            <h3>Reviews</h3>
                        </div>
                        <div id="popupContainer" class="popup">
                            <div class="payment-popup-main">
                                <h2 style="color: #2d3467;">Booking Details</h2>
                                <div class="inner-paymentdetails-personal">
                                    <div class="innerinfo-div">
                                        <label for="bookingfname">First Name</label>
                                        <input class="input-userdata-payment-name" type="text" name="fname" id="bookingfname" value="{{userdetails.[0]}}" required placeholder="Enter the First Name">
                                    </div>
                                    <div class="innerinfo-div">
                                        <label for="bookinglname">Last Name</label>
                                        <input class="input-userdata-payment-name" type="text" name="lname" id="bookinglname" value="{{userdetails.[1]}}" required placeholder="Enter the Last Name">
                                    </div>
                                </div>
                                <div class="inner-paymentdetails-personal">
                                    <div class="innerinfo-div">
                                        <label for="bookingphonenumber">Phone Number</label>
                                        <input class="input-userdata-payment"type="tel" name="pnumber" id="bookingphonenumber" required placeholder="Enter the Mobile Number" value="{{userdetails.[2]}}">
                                    </div>
                                </div>
                                <div class="inner-paymentdetails-personal">
                                    <div class="innerinfo-div">
                                        <label for="bookingbookingmalecount">Male Count</label>
                                        <input class="gendercount-payment" type="number" name="malecount" min="0" id="bookingmalecount" placeholder="Enter the Male Count" required>
                                    </div>
                                    <div class="innerinfo-div">
                                        <label for="bookingfemalecount">Female Count</label>
                                        <input class="gendercount-payment" type="number" name="femalecount" min="0" id="bookingfemalecount" placeholder="Enter the Female Count" required>
                                    </div>
                                </div>
                                <div class="inner-paymentdetails-personal">
                                    <div class="innerinfo-div">
                                        <label for="bookingvegcount">Veg Count</label>
                                        <input class="gendercount-payment" type="text" name="vegcount" id="bookingvegcount" min="0" placeholder="Enter the Veg Count">
                                    </div>
                                    <div class="innerinfo-div">
                                        <label for="bookingnonvegcount">Non-Veg Count</label>
                                        <input class="gendercount-payment" type="text" name="nonvegcount" id="bookingnonvegcount" min="0" placeholder="Enter the Non-Veg Count">
                                    </div>
                                </div>
                                <div class="innerinfo-balence">
                                    <div class="innerinfo-balence-content">
                                        <p>Total Amount : <i class="fa-solid fa-indian-rupee-sign"></i>{{busdata.[10]}}</p>
                                    </div>
                                    <p><i class="fa-solid fa-indian-rupee-sign"></i>{{busdata.[21]}} Settle the Balance Amount upon pickup</p>
                                </div>
                                <div class="button-popup-payment">
                                    <button id="closeButton" class="paybutton-personalinfo-cancel">Cancel</button>
                                    <button id="bookamount-button" class="paybutton-personalinfo" type="submit">Pre Book Now at <i class="fa-solid fa-indian-rupee-sign"></i>{{busdata.[11]}}</button>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            {{/if}}
        </div>
    </div>
</body>
<script>
    try{
        const popupButton = document.getElementById("popupButton");
        const popupContainer = document.getElementById("popupContainer");
        const closeButton = document.getElementById("closeButton");

        popupButton.addEventListener("click", function () {
            popupContainer.style.display = "flex";
        });

        closeButton.addEventListener("click", function () {
            popupContainer.style.display = "none";
        });
    }
    catch(e){
        console.log(e)
    }

    function loadAnimationsearch(){
        try{
            const contentcontainer = document.querySelector(".content-container");
            setTimeout(function(){
                    contentcontainer.style.display = "none";
                    document.getElementById("fetch-content-maindiv").style.display = "flex";
                },2000);
        }catch(e){
            console.log("loadanimationError : "+e);
        }
    }

    function loadAnimationcontent(){
        try{
            const contentcontainer = document.querySelector(".content-container");
            setTimeout(function(){
                    contentcontainer.style.display = "none";
                    document.getElementById("outer-bus-data").style.display = "flex";
                },2000);
        }catch(e){
            console.log("loadanimationError : "+e);
        }
    }

    async function likebutton(id,index){
        try {
            const response = await fetch(`/toggle-like/${id}`, {
                method: 'POST',
            });

            if (response.ok) {
                const data = await response.json();
                if(data.isLiked ==="Like"){
                    let togglePassword = document.getElementById(`toggleheart_${index}`);
                    togglePassword.classList.remove('fa-regular');
                    togglePassword.classList.add('fa-solid');
                }
                else{
                    let togglePassword = document.getElementById(`toggleheart_${index}`);
                    togglePassword.classList.remove('fa-solid');
                    togglePassword.classList.add('fa-regular');
                }
            }
        } catch (error) {
            console.error('Error toggling like:', error);
        }
        
    }

    //javascript code for prev and next od day spot images

    let slideIndexarr = [];

    function showSlide(indexValue) {
        
        try{
            const spotslides = document.getElementsByClassName("mySlidesspot"+indexValue);

            for (let i = 0; i < spotslides.length; i++) {
                spotslides[i].style.display = "none";
            }

            if (slideIndexarr[indexValue] < 1) {
                slideIndexarr[indexValue] = spotslides.length;
            } else if (slideIndexarr[indexValue] > spotslides.length) {
                slideIndexarr[indexValue] = 1;
            }

            spotslides[slideIndexarr[indexValue] - 1].style.display = "block";
        }
        catch{
            return
        }
    }

    function prevSlide(ind) {
        slideIndexarr[ind]--;
        showSlide(ind);
    }

    function nextSlide(ind) {
        slideIndexarr[ind]++;
        showSlide(ind);
    }

    document.addEventListener("DOMContentLoaded", function () {
        try{
            const dayCountid = document.getElementById("dayCountid").value;
            slideIndexarr = Array.from({ length: dayCountid }, () => 1);
            for(let i=0;i<dayCountid;i++){
                showSlide(i);   
            }
            const prevButton = document.querySelector(".prev-button");
            const nextButton = document.querySelector(".next-button");

            prevButton.addEventListener("click", prevSlide);
            nextButton.addEventListener("click", nextSlide);
        }
        catch(e){
            return
        }
    });

    //auto slide the bus images
    let slideIndex = 1;
    const activeDiv = document.getElementById('bus-img-detail');

    function checkDivActiveStatus() {
        try{
            if (activeDiv.classList.contains('mySlides')) {
                showSlides();
            }
        }
        catch{
            return;
        }
    }

function showSlides() {
    try{
        let slides = document.getElementsByClassName("mySlides");
        let dots = document.getElementsByClassName("dot");

        for (let i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
            dots[i].classList.remove("active");
        }

        if (slideIndex < 1) {
            slideIndex = slides.length;
        } else if (slideIndex > slides.length) {
            slideIndex = 1;
        }

        slides[slideIndex - 1].style.display = "block";
        dots[slideIndex - 1].classList.add("active");
        slideIndex++;
    }
    catch{
        return
    }
}

loadAnimationsearch();
loadAnimationcontent();
checkDivActiveStatus();

setInterval(showSlides, 3000);




</script>
    <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
    <script>

        document.getElementById('bookamount-button').onclick = async function(e){
            e.preventDefault();

            const planid_payment = document.getElementById("planid-payment").value;
            const planAmount = document.getElementById("plan-amount-payment").value;

            let response= await fetch(`/payment/${planid_payment}`, {
                method: 'POST',
            });
            const fname = document.getElementById("bookingfname").value;
            const lname = document.getElementById("bookinglname").value;
            const phonenumber = document.getElementById("bookingphonenumber").value;
            const malecount = document.getElementById("bookingmalecount").value;
            const femalecount = document.getElementById("bookingfemalecount").value;
            const vegcount = document.getElementById("bookingvegcount").value;
            const nonvegcount = document.getElementById("bookingnonvegcount").value;

            if(fname!="" && lname!="" && phonenumber!="" && malecount!="" && femalecount!="" && vegcount!="" && nonvegcount!=""){
                let orderdata = await response.json()
                if(orderdata.success){
                    var options = {
                        "key": "rzp_test_wQgiCkxy1ggt9B",
                        "amount": 100*100,
                        "currency": "INR",
                        "name": "Travelo India", 
                        "description": "Test Transaction",
                        "image": "https://lh3.googleusercontent.com/drive-viewer/AITFw-xREwv9B_wu_5uRpIy4qgWUkPuuK6MaxFaLT4mwonCYu1_YhA7PtldfCNGtJQD-88rN6j0fHK5cJTv6ILBpKGoboz19HA=s2560",
                        "order_id": orderdata.id,
                        "handler":async function (response){
                            await fetch(`/paymentstatus?paymentid=${response.razorpay_payment_id}&fname=${fname}&lname=${lname}&phonenumber=${phonenumber}&malecount=${malecount}&femalecount=${femalecount}&vegcount=${vegcount}&nonvegcount=${nonvegcount}`, {
                                method: 'POST',
                            }).then(response => response.json())
                            .then(data => {
                                if (data.success) {
                                    window.location.href = '/booking';
                                } else {
                                    window.location.href = '/error';
                                }
                            })
                        },  
                        "notes": {
                            "address": "Razorpay Corporate Office"
                        },
                        "theme": {
                            "color": "#2d3467"
                        }
                    };
                    var rzp1 = new Razorpay(options);

                    rzp1.on('payment.failed',async function (response){
                        const errorDetails = response.error;
                        const paymentId = errorDetails.metadata.payment_id; 
                        await fetch(`/paymentstatus/${paymentId}`, {
                            method: 'POST',
                        })
                        
                        {{!-- .then(response => response.json())
                        .then(data => {
                            if (data.success) {
                                window.location.href = '/booking';
                            } else {
                                window.location.href = '/error';
                            }
                        }) --}}
                    });

                    rzp1.open();
                }
                else{
                    window.location.href = '/404'; 
                }
            }
        }
        
        
    
    </script>

</html>