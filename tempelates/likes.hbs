<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Liked Buses</title>
    <link rel="icon" href="/images/logowhite.svg">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
    <link rel="stylesheet" href="/likes.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Great+Vibes&family=Open+Sans:wght@300;400;500;600;700;800&family=Philosopher&display=swap" rel="stylesheet">
   
</head>
<body>
    <div id="main">
        <div id="homenavbar">
                <img id="appicon" src="/images/homelogo.png" alt="logo">
                <form action="/home" class="bookingdiv-1">
                    <button id="bookingbutton" href="/home" ><i class="fa-solid fa-house"></i> Home</button>
                </form>

                <form action="/booking"  class="bookingdiv">
                    <button id="bookingbutton" href="/booking"><i class="fa-solid fa-bus-simple"></i> Booking</button>
                </form>

                <div class="profilediv">
                    <button id="profilebutton"><i class="fa-solid fa-heart"></i> Wishlist</button>
                </div>

                <form action="/profile" class="bookingdiv">
                    <button id="bookingbutton" href="/profile"><i class="fa-solid fa-user"></i> Profile</button>
                </form>

                <form action="/exit" class="exitdiv">
                    <button id="exitbutton"><i class="fas fa-sign-out-alt fa-lg"></i> Sign Out</button>
                </form>                                                                                                 
        </div>
        <div id="wishlistheader">
            {{#if length}}
                <p id="header-content">{{length}} Bus Added in Wishlist</p>
            {{else}}
                <p id="header-content">0 Bus Added in Wishlist</p>
            {{/if}}
        </div>
        <div class="wishlist-loading">
            <div class="skeleton-card">
                <div class="skeleton-image"></div>
                <div class="skeleton-details">
                    <div class="firstdiv-loading">
                        <div class="logo-loadingdiv"></div>
                        <div class="inner-firstdiv-loading">
                            <div class="skeleton-line-logo"></div>
                            <div class="skeleton-line-logo-2"></div>
                        </div>
                        <div class="heart-loader"></div>
                    </div>
                    <br>
                    <div class="skeleton-line"></div>
                    <div class="skeleton-line"></div>
                    <br>
                    <div class="skeleton-line"></div>
                    <div class="skeleton-line"></div>
                    <div class="skeleton-line"></div>
                </div>
                </div>
            
                <div class="skeleton-card">
                <div class="skeleton-image"></div>
                <div class="skeleton-details">
                    <div class="firstdiv-loading">
                        <div class="logo-loadingdiv"></div>
                        <div class="inner-firstdiv-loading">
                            <div class="skeleton-line-logo"></div>
                            <div class="skeleton-line-logo-2"></div>
                        </div>
                        <div class="heart-loader"></div>
                    </div>
                    <br>
                    <div class="skeleton-line"></div>
                    <div class="skeleton-line"></div>
                    <br>
                    <div class="skeleton-line"></div>
                    <div class="skeleton-line"></div>
                    <div class="skeleton-line"></div>
                </div>
            </div>
        </div>
        <div id="content-block">
            {{#if length}}
                {{#each busdataarr}}
                    <div id="inner-content-block">
                        <img id="busimage" src="data:{{this.[10]}}" alt="">
                        <div >
                            <div id="busdata-block">
                                <img id="dealerimage" src="data:{{this.[0]}}" alt=""> 
                                <div>
                                    <p id="busname">{{this.[1]}}</p>
                                    <p id="companyname">{{this.[2]}}</p>
                                </div>
                                <div id="seatcount">
                                    <p>{{this.[3]}} Seats</p>
                                </div>
                                <div>
                                    {{#if this.[6]}}
                                        <p class="acdata"><svg width="20" height="25" stroke-width="1.5"  viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="IconChangeColor"> <path d="M22 3.6V11H2V3.6C2 3.26863 2.26863 3 2.6 3H21.4C21.7314 3 22 3.26863 22 3.6Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M18 7H19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M2 11L2.78969 13.5844C3.04668 14.4255 3.82294 15 4.70239 15H6" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M22 11L21.2103 13.5844C20.9533 14.4255 20.1771 15 19.2976 15H18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M9.5 14.5C9.5 14.5 9.5 21.5 6 21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M14.5 14.5C14.5 14.5 14.5 21.5 18 21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M12 14.5V21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> </svg> AC</p>
                                    {{else}}
                                        <p class="acdata"><svg width="20" height="25" stroke-width="1.5"  viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="IconChangeColor"> <path d="M22 3.6V11H2V3.6C2 3.26863 2.26863 3 2.6 3H21.4C21.7314 3 22 3.26863 22 3.6Z" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M18 7H19" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M2 11L2.78969 13.5844C3.04668 14.4255 3.82294 15 4.70239 15H6" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M22 11L21.2103 13.5844C20.9533 14.4255 20.1771 15 19.2976 15H18" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M9.5 14.5C9.5 14.5 9.5 21.5 6 21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M14.5 14.5C14.5 14.5 14.5 21.5 18 21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> <path d="M12 14.5V21.5" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" id="mainIconPathAttribute"></path> </svg> Non AC</p>        
                                    {{/if}}
                                </div>
                                {{#if this.[12]}}
                                    <button id="heart-status-button" onclick="likebutton('{{this.[11]}}','{{@index}}')"><i class="fa-solid fa-heart fa-lg" id="toggleheart_{{@index}}"></i></button>
                                {{else}}
                                    <button id="heart-status-button" onclick="likebutton('{{this.[11]}}','{{@index}}')"><i class="fa-regular fa-heart fa-lg" id="toggleheart_{{@index}}"></i></button>
                                {{/if}}
                            </div><br>
                            <div id="feature-div">
                                {{#if this.[5]}}
                                    <p><i class="fa-solid fa-radio"></i> Audio System</p>
                                {{/if}}
                                {{#if this.[7]}}
                                    <p><i class="fa-solid fa-couch"></i> Seater</p>
                                {{else}}
                                    <p><i class="fa-solid fa-couch"></i> Semi Sleeper</p>
                                {{/if}}
                                {{#if this.[8]}}
                                    <p><i class="fa-solid fa-lightbulb"></i> DJ Lighting</p>
                                {{/if}}
                                {{#if this.[9]}}
                                    <p><i class="fa-solid fa-glass-water-droplet"></i> Purifier</p>
                                {{/if}}
                                {{#if this.[13]}}
                                    <p><i class="fa-solid fa-wifi"></i> Wifi Connectivity</p>
                                {{/if}}
                                {{#if this.[14]}}
                                    <p><i class="fa-solid fa-suitcase-rolling"></i> Lagguage Storage</p>
                                {{/if}}
                                {{#if this.[15]}}
                                    <p><i class="fa-solid fa-tv"></i> Entertainment System</p>
                                {{/if}}
                            </div>
                            <div id="packages-content">
                                {{#if this.[4]}}
                                    <p id="package-title">Package Avaliable</p>
                                    <div id="feature-data-block">
                                        {{#each this.[4]}}
                                            <p><i class="fa-solid fa-location-dot"></i> {{this}}</p>
                                        {{/each}}
                                    </div>
                                {{else}}
                                    <p id="package-title">Currently No Package Avaliable, Check Later</p>
                                {{/if}}
                            </div>
                        </div>
                    </div>
                {{/each}}
            {{else}}
                {{!-- <svg class="svg-1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1440 320"><path fill="#f0f0f0" fill-opacity="1" d="M0,96L34.3,122.7C68.6,149,137,203,206,213.3C274.3,224,343,192,411,160C480,128,549,96,617,74.7C685.7,53,754,43,823,42.7C891.4,43,960,53,1029,90.7C1097.1,128,1166,192,1234,208C1302.9,224,1371,192,1406,176L1440,160L1440,320L1405.7,320C1371.4,320,1303,320,1234,320C1165.7,320,1097,320,1029,320C960,320,891,320,823,320C754.3,320,686,320,617,320C548.6,320,480,320,411,320C342.9,320,274,320,206,320C137.1,320,69,320,34,320L0,320Z"></path></svg>
                <div class="svgfiller-1"></div> --}}
                <div class="warning-content">
                    <img class="warning-bg" src="/images/no-wishlist-bg.svg" alt="">
                    <p class="notfountcompleted-1">No Buses Added in Wishlist to Show</p>
                    <a href="/home" id="homereference">
                        <p class="redirect-txt">Add Favorite Bus to Your Wishlist <i  class="fa-solid fa-angle-right"></i></p>
                    </a>
                </div>
            {{/if}}
        </div>
    </div>
</body>
<script>
     async function likebutton(id,index){
        try {
            const response = await fetch(`/toggle-like/${id}`, {
                method: 'POST',
            });

            if (response.ok) {
                const data = await response.json();
                if(data.isLiked ==="Like"){
                    let togglePassword = document.getElementById(`toggleheart_${index}`);
                    togglePassword.classList.remove('fa-regular');
                    togglePassword.classList.add('fa-solid');
                }
                else{
                    let togglePassword = document.getElementById(`toggleheart_${index}`);
                    togglePassword.classList.remove('fa-solid');
                    togglePassword.classList.add('fa-regular');
                }
            }
        } catch (error) {
            console.error('Error toggling like:', error);
        }   
    }

    try{
        setTimeout(function(){
            document.querySelector(".wishlist-loading").style.display = "none";
            document.getElementById("content-block").style.display = "flex";
        },2000);
    }
    catch(e){
        console.log(e);
    }

</script>
</html>